{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA","file":"index.js","sourcesContent":["function e(e,t,n,o){return new(n||(n=Promise))((function(a,i){function r(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}s((o=o.apply(e,t||[])).next())}))}const t=e=>\"function\"==typeof e,n=(e,t)=>{Object.keys(e).forEach((n=>{t(e[n],n)}))};let o=null;const a=()=>o,i=e=>o=e,r=()=>o=null,l=t=>{t.isRefreshing||(t.isRefreshing=!0,r(),function(t){e(this,void 0,void 0,(function*(){return yield Promise.resolve().then(t)}))}((()=>{t(),t.isRefreshing=!1})),i(t))},s=e=>{if(null==e)return;const t=a();return function(...n){return null!=t&&(l(t),i(t)),e.call(this,...n)}};const c=Promise.prototype.then,u=Promise.prototype.catch,f=Promise.prototype.finally,h=wx;if(!c.$$isRewritten){Promise.prototype.then=function(e,t){return c.call(this,s(e),s(t))},Promise.prototype.catch=function(t){return e(this,void 0,void 0,(function*(){return yield u.call(this,s(t))}))},Promise.prototype.finally=function(t){return e(this,void 0,void 0,(function*(){return yield f.call(this,s(t))}))};const o=setTimeout,a=setInterval;setTimeout=function(e,...t){return o.call(this,s(e),...t)},setInterval=function(e,...t){return a.call(this,s(e),...t)},function(){const e={};n(h,((n,o)=>{t(n)?e[o]=function(e,...t){if(null!==(o=e)&&\"object\"==typeof o){const{success:t,fail:n,complete:o}=e;t&&(e.success=s(t)),n&&(e.fail=s(n)),o&&(e.complete=s(o))}var o;return n.call(this,e,...t)}:e[o]=n})),wx=Object.freeze(e)}(),Promise.prototype.then.$$isRewritten=!0}const d=()=>{const e=getCurrentPages();return e[e.length-1]};let p=null;const v=e=>w(\"ready\",e),g=e=>w(\"moved\",e),m=e=>w(\"detached\",e),P=e=>w(\"error\",e);function w(e,t){const n=null==p?void 0:p[e];if(null!=n){let e=n.get(null);null!=e||(e=[],n.set(null,e)),e.push(s(t))}}const y=e=>(null!=e.setup&&function(e){var o;const l=null!=p||(p={ready:new Map,moved:new Map,detached:new Map,error:new Map}),c=function(e){const t=e.lifetimes=e.lifetimes||{},o={};return n(t,((e,t)=>{o[t]=e})),o}(e),u=function(e){const t=e.properties;return t?Object.keys(t).join(\",\"):\"\"}(e),f=null===(o=e.observers)||void 0===o?void 0:o[u],h=e.setup;(function(e,t){const o=t.lifetimes=t.lifetimes||{};n(e,((e,t)=>{o[t]=function(...t){var n;null===(n=e.get(this))||void 0===n||n.forEach((e=>e(...t)))}}))})(l,e),u&&((e.observers||(e.observers={}))[u]=function(...e){var t;null==f||f.call(this,...e),null===(t=this.$$updateData)||void 0===t||t.call(this)});(e.lifetimes||(e.lifetimes={})).attached=function(){var o;const l={};let u;function f(){!function(e,o){const a={};n(o,((n,o)=>{t(n)?e[o]=s(n):a[o]=n})),e.setData(a)}(this,u()),r(),m((()=>{return e=this,void(null!=p&&n(p,(t=>{t.delete(e)})));var e}))}null===(o=c.attached)||void 0===o||o.call(this),n(c,((e,t)=>{\"attached\"!==t&&(\"ready\"===t&&v(e),\"moved\"===t&&g(e),\"detached\"===t&&m(e),\"error\"===t&&P(e))})),i((()=>{if(!t(u))return;const e=u();n(e,((n,o)=>{t(n)&&delete e[o]})),this.setData(e)})),this.$$updateData=a(),null!=e.properties&&n(e.properties,((e,t)=>{Object.defineProperty(l,t,{get:()=>this.data[t],set(){}})})),u=h(l,function(e){const t={},n=[\"animate\",\"clearAnimation\",\"createIntersectionObserver\",\"createSelectorQuery\",\"dataset\",\"getOpenerEventChannel\",\"getPageId\",\"getRelationNodes\",\"getTabBar\",\"groupSetData\",\"hasBehavior\",\"id\",\"is\",\"selectAllComponents\",\"selectComponent\",\"selectOwnerComponent\",\"setUpdatePerformanceListener\",\"triggerEvent\"];for(const o of n)t[o]=e[o];return Object.freeze(t)}(this)),t(u)?f.call(this):u instanceof Promise&&u.then((e=>{u=e,f.call(this)}))}}(e),Component(e));var R;!function(e){e.onPageLoad=\"onLoad\",e.onPageShow=\"onShow\",e.onPageHide=\"onHide\",e.onPageReady=\"onReady\",e.onPageUnload=\"onUnload\",e.onPageResize=\"onResize\",e.onPageScroll=\"onPageScroll\",e.onPullDownRefresh=\"onPullDownRefresh\",e.onReachBottom=\"onReachBottom\",e.onTabItemTap=\"onTabItemTap\",e.onSaveExitState=\"onSaveExitState\"}(R||(R={}));const S=e=>z(R.onPageShow,e),b=e=>z(R.onPageHide,e),D=e=>z(R.onPageReady,e),M=e=>z(R.onPageUnload,e),T=e=>z(R.onPageResize,e),O=e=>z(R.onPageScroll,e),E=e=>z(R.onPullDownRefresh,e),I=e=>z(R.onReachBottom,e),x=e=>z(R.onTabItemTap,e),C=e=>z(R.onSaveExitState,e);let $=null;const B=()=>$||($={onShow:new Map,onHide:new Map,onReady:new Map,onUnload:new Map,onPullDownRefresh:new Map,onReachBottom:new Map,onPageScroll:new Map,onResize:new Map,onTabItemTap:new Map,onSaveExitState:new Map}),j=e=>{null!=$&&n($,(t=>{t.delete(e)}))};function z(e,t){const n=null==$?void 0:$[e];if(null!=n){let e=n.get(d());null!=e||(e=[],n.set(d(),e)),e.push(s(t))}}const L=e=>(null!=e.setup&&function(e){const o=B(),l=function(e){const t={};return n(R,(n=>{e[n]&&(t[n]=e[n])})),t}(e),c=e.setup;(function(e,t){n(e,((e,n)=>{t[n]=function(...t){var n;null===(n=e.get(this))||void 0===n||n.forEach((e=>e(...t)))}}))})(o,e),e.onLoad=function(e){var o;let u;function f(){!function(e,o){const a={};n(o,((n,o)=>{t(n)?e[o]=s(n):a[o]=n})),e.setData(a)}(this,u()),r(),M((()=>j(this)))}null===(o=l.onLoad)||void 0===o||o.call(this,e),n(l,((e,t)=>{\"onLoad\"!==t&&(t===R.onPageShow&&S(e),t===R.onPageHide&&b(e),t===R.onPageReady&&D(e),t===R.onPageUnload&&M(e),t===R.onPageResize&&T(e),t===R.onPullDownRefresh&&E(e),t===R.onReachBottom&&I(e),t===R.onPageScroll&&O(e),t===R.onTabItemTap&&x(e),t===R.onSaveExitState&&C(e))})),i((()=>{if(!t(u))return;const e=u();n(e,((n,o)=>{t(n)&&delete e[o]})),this.setData(e)})),this.$$updateData=a(),u=c(e,function(e){const t={},n=[\"animate\",\"clearAnimation\",\"createIntersectionObserver\",\"createSelectorQuery\",\"getOpenerEventChannel\",\"getPageId\",\"getRelationNodes\",\"getTabBar\",\"groupSetData\",\"hasBehavior\",\"is\",\"options\",\"route\",\"selectAllComponents\",\"selectComponent\",\"selectOwnerComponent\",\"setUpdatePerformanceListener\"];for(const o of n)t[o]=e[o];return Object.freeze(t)}(this)),t(u)?f.call(this):u instanceof Promise&&u.then((e=>{u=e,f.call(this)}))}}(e),Page(e));if (!exports.__esModule) Object.defineProperty(exports, \"__esModule\", { value: true });Object.defineProperty(exports, 'ComponentWithSetup', { enumerable: true, configurable: true, get: function() { return y; } });Object.defineProperty(exports, 'PageWithSetup', { enumerable: true, configurable: true, get: function() { return L; } });Object.defineProperty(exports, 'onDetached', { enumerable: true, configurable: true, get: function() { return m; } });Object.defineProperty(exports, 'onError', { enumerable: true, configurable: true, get: function() { return P; } });Object.defineProperty(exports, 'onMoved', { enumerable: true, configurable: true, get: function() { return g; } });Object.defineProperty(exports, 'onPageHide', { enumerable: true, configurable: true, get: function() { return b; } });Object.defineProperty(exports, 'onPageReady', { enumerable: true, configurable: true, get: function() { return D; } });Object.defineProperty(exports, 'onPageResize', { enumerable: true, configurable: true, get: function() { return T; } });Object.defineProperty(exports, 'onPageScroll', { enumerable: true, configurable: true, get: function() { return O; } });Object.defineProperty(exports, 'onPageShow', { enumerable: true, configurable: true, get: function() { return S; } });Object.defineProperty(exports, 'onPageUnload', { enumerable: true, configurable: true, get: function() { return M; } });Object.defineProperty(exports, 'onPullDownRefresh', { enumerable: true, configurable: true, get: function() { return E; } });Object.defineProperty(exports, 'onReachBottom', { enumerable: true, configurable: true, get: function() { return I; } });Object.defineProperty(exports, 'onReady', { enumerable: true, configurable: true, get: function() { return v; } });Object.defineProperty(exports, 'onSaveExitState', { enumerable: true, configurable: true, get: function() { return C; } });Object.defineProperty(exports, 'onTabItemTap', { enumerable: true, configurable: true, get: function() { return x; } });Object.defineProperty(exports, 'useAutoUpdate', { enumerable: true, configurable: true, get: function() { return s; } });\n"]}